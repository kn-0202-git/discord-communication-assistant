# Gemini プロセスレビュー: マルチLLM体制への適応度診断

**日付:** 2026-01-12
**対象:** 開発プロセス全体 (`CLAUDE.md`, `codex_process.md`, `docs/`)
**テーマ:** LLM非依存（LLM-Agnostic）な開発体制、ルール整合性、監査可能性

---

## 👥 専門家チームによる議論シミュレーション

### 1. ルールの「唯一の信頼源 (SSOT)」に関する議論

**🏛️ リードアーキテクト:**
「現状、`CLAUDE.md` と `codex_process.md` の2つの主要なルールブックが存在していますが、これは危険な兆候です。例えば『テストを先に書く』というルールが `CLAUDE.md` で変更された場合、Codex側のドキュメントには反映されないリスクがあります（**ダブルメンテナンス問題**）。」

**🤖 LLMOpsエンジニア:**
「その通りです。`CLAUDE.md` というファイル名は、他のLLM（GeminiやGPT-4）に対して『自分には関係ないファイルだ』という誤ったバイアスを与える可能性があります。ファイル名を `AI_CONTEXT.md` や `DEVELOPER_GUIDE.md` のような中立的な名前に変更し、各モデル固有の振る舞い（例：Claude固有のThinkingプロセスやCodex固有の記録自動化など）だけを別ファイルまたは別セクションに切り出すべきです。」

**改善案 (Architecture):**
- **共通ルール:** `docs/rules/CORE_RULES.md` (命名は仮) に集約。
- **エージェント別ガイド:** `CLAUDE.md`, `CODEX.md` は共通ルールを参照しつつ、各モデルの特性（得意なプロンプト形式など）のみを記述する構造へ。

### 2. コンテキスト管理とトークン節約

**🤖 LLMOpsエンジニア:**
「`codex_process.md` で定義されている『差分のみ記録』『要約＋詳細』のテンプレートは非常に優秀です。しかし、これがCodex限定のルールに見えます。すべてのLLMがこの『トークン節約モード』で動作するように強制すべきです。特に会話ログ（`CONVERSATION_LOG`）のフォーマットがモデルによって揺れると、将来的にログを機械的に分析してナレッジベース化する際にパース不能になります。」

**📈 プロジェクトマネージャー:**
「ログフォーマットの標準化は必須ですね。`docs/templates/` ディレクトリを作成し、そこに `log_template.md` `handover_template.md` を配置して、全LLMがそこを参照するようにすべきです。」

### 3. 「誰がやったか？」の監査 (Traceability)

**📝 システム監査人:**
「現在、複数のAIが入れ替わり立ち替わり開発に参加する体制になっていますが、ログファイルを見ただけでは『このコードを書いたのがClaude 3.5 Sonnetなのか、Codexなのか、Geminiなのか』が直感的に分かりません。もしバグが混入した場合、どのモデルの傾向なのかを分析できません。」

**改善案 (Audit):**
- 各ドキュメント（特に `DEVELOPMENT_LOG` や `CONVERSATION_LOG`）のヘッダーに `Agent: {ModelName}` フィールドを必須化する。

### 4. セキュリティと引き継ぎ

**🔒 セキュリティエンジニア:**
「『引き継ぎカプセル (`HANDOVER_*.md`)』の仕組みはセキュリティ観点でも優れています。モデルを切り替える際、前のモデルのフルテキスト履歴（チャットログ）を次のモデルに渡すと、そこに埋もれたAPIキーなどの機密情報が拡散するリスクがあります。要約されたMarkdownファイルのみを渡す方法は、情報のサニタイズ（無害化）としても機能しています。」

---

## ✅ 総合評価とアクションプラン

### 評価スコア
- **LLM非依存性:** 🟡 **要改善** (`CLAUDE.md` への依存が高い)
- **ルール整合性:** 🟡 **要改善** (情報が2箇所に分散)
- **監査可能性:** 🟢 **良好** (文書化文化が定着している)
- **トークン効率:** 🟢 **非常に良い** (差分記録ルールが秀逸)

### 推奨アクション (即時実行推奨)

1.  **ドキュメント構造のリファクタリング**
    - `CLAUDE.md` にある「コーディング規約」「テスト方針」などの汎用的なルールを抽出し、`docs/rules/GENERAL_GUIDELINES.md`（仮）等の共通ファイルへ移動。
    - `CLAUDE.md` と `codex_process.md` は、その共通ファイルを `Use this rule set: [path]` のように参照する形にする。

2.  **テンプレートの共有化**
    - `docs/templates/` を作成。
    - `log_template.md` (開発ログ用)
    - `conversation_template.md` (会話ログ用)
    - 全LLMがこのテンプレートに従うよう指示。

3.  **エージェント署名の義務化**
    - ログファイルのテンプレートに `Author (Agent):` 欄を追加。
    - これにより「どのAIが優秀だったか」の後方分析が可能になる。

4.  **Codexプロセスの全展開**
    - `codex_process.md` にある「実装完了時に自発的にログを書く」というルールは、Claudeなど他のモデルにも適用すべき「ベストプラクティス」であるため、共通ルールに昇格させる。

### 結論
現在のプロセスは非常にレベルが高いですが、「Claude専用」からスタートした名残があります。**「共通ルール（定数）」と「エージェント固有の振る舞い（変数）」を分離**することで、GeminiやGPT-4など、どんな強力な新しいモデルが登場しても即座にプロジェクトに組み込める「プラグナブルな開発体制」が完成します。
