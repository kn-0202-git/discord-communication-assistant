# 開発計画

## 1. 現在の状況

**→ Phase 1 準備完了（リポジトリ作成済み）**

### 完了
- [x] 要件定義
- [x] 文書構成確定
- [x] 全文書作成
- [x] AI設計（複数プロバイダー対応）
- [x] 開発環境設計（uv + ruff + pre-commit）
- [x] GitHubリポジトリ作成
- [x] 初期ファイル配置

### 次のアクション
- [x] Issue #1 起票・実装完了（2025-01-01）
- [x] Issue #2 Discord Bot基盤完了（2025-01-04）
- [ ] Issue #3 メッセージ保存

## 2. 開発方針

- テスト駆動開発（TDD）
- GitHub Issue駆動
- 1 Issue = 1 PR = 1 機能
- Claude Codeで実装補助
- 9つの専門家視点でレビュー

## 3. Phase 1 詳細スケジュール

### Week 1: 基盤構築

| Issue | タスク | 完了条件 | 状態 |
|-------|--------|----------|------|
| #1 | DB設計・実装 | models.py、テスト通過 | ✅完了 |
| #2 | Discord Bot基盤 | 接続確認、イベント受信 | ✅完了 |
| #3 | メッセージ保存 | テスト通過 | 未着手 |

### Week 2: Bot機能

| Issue | タスク | 完了条件 | 状態 |
|-------|--------|----------|------|
| #4 | 添付ファイル保存 | 写真・動画保存成功 | 未着手 |
| #5 | Workspace/Room分離 | 構造通りに分離確認 | 未着手 |
| #6 | ローカルストレージ | ファイル保存・取得 | 未着手 |

### Week 3: AI連携

| Issue | タスク | 完了条件 | 状態 |
|-------|--------|----------|------|
| #7 | AI基盤（base, router） | 抽象化レイヤー完成 | 未着手 |
| #8 | OpenAIプロバイダー | 接続・テスト通過 | 未着手 |
| #9 | /summary実装 | 要約生成確認 | 未着手 |
| #10 | /search実装 | 検索結果返却確認 | 未着手 |

### Week 4: 統合・テスト

| Issue | タスク | 完了条件 | 状態 |
|-------|--------|----------|------|
| #11 | 統合Room通知 | 通知送信成功 | 未着手 |
| #12 | 他AIプロバイダー追加 | Anthropic, Google, Groq | 未着手 |
| #13 | 統合テスト | 全機能連携確認 | 未着手 |
| #14 | 試験運用準備 | 1社分のWorkspace構築 | 未着手 |

## 4. Issue テンプレート
```markdown
## 概要
何を実装するか

## 完了条件
- [ ] テストが書かれている
- [ ] 実装が完了している
- [ ] 全テスト通過
- [ ] ruff check 通過
- [ ] ドキュメント更新（必要なら）

## 関連ドキュメント
- REQUIREMENTS.md: #{セクション番号}
- ARCHITECTURE.md: #{セクション番号}

## テストケース
- TEST_PLAN.md: {テストID}

## 専門家チェック
- [ ] ソフトウェアエンジニア視点
- [ ] Python視点
- [ ] セキュリティ視点
- [ ] QA視点
```

## 5. PR テンプレート
```markdown
## 対応Issue
closes #XX

## 変更内容
-

## テスト結果
uv run pytest tests/ -v の出力

## 確認事項
- [ ] 全テスト通過
- [ ] ruff check 通過
- [ ] pyright 通過（警告のみ許容）
- [ ] ドキュメント更新（必要なら）
```

## 6. GitHub運用

### ブランチ戦略
```
main              ← 本番（保護）
└── feature/issue-{n}  ← 機能開発
```

### マージルール
- PRは全テスト通過必須
- ruff check通過必須
- セルフマージOK（1人開発のため）

## 7. 進捗の確認方法

### テスト結果で判断
```bash
uv run pytest tests/ -v
```

- `PASSED` が増えている → 順調
- `FAILED` がある → 修正必要

### カバレッジで判断
```bash
uv run pytest tests/ --cov=src
```

- 70%以上 → OK
- 70%未満 → テスト追加

### リントチェック
```bash
uv run ruff check src/
```

- エラー0 → OK
- エラーあり → 修正必要
