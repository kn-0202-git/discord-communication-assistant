# 設計決定記録（ADR）

重要な設計決定とその理由を記録する。

---

## ADR-001: チャットプラットフォームの選定

### 日付
2025-01-XX

### 背景
請負者とのやり取りを記録・管理するためのプラットフォームが必要。
現在はWhatsAppを使用しているが、Bot連携ができない。

### 選択肢
- A: Slack - 業務向け、Bot対応◎、無料プランは履歴90日制限
- B: Discord - Bot対応◎、履歴無制限、無料
- C: LINE - 日本で普及、Bot制約多い
- D: Telegram - Bot自由、セキュリティイメージに懸念

### 決定
**B: Discord**を採用

### 理由
- 履歴が無制限（重要な要件）
- Bot APIが自由で制限なし
- 無料で運用可能
- 請負者がSlackを使っていないため、どちらも学習コストは同じ

---

## ADR-002: 複数AIプロバイダー対応

### 日付
2025-01-XX

### 背景
AIのコストと品質のバランスを取るため、機能ごとに異なるAIを使いたい。

### 選択肢
- A: OpenAI固定
- B: 複数プロバイダー対応（抽象化レイヤー）

### 決定
**B: 複数プロバイダー対応**を採用

### 理由
- 機能ごとにコスト最適化できる
- プロバイダーの障害時にフォールバック可能
- 将来の価格変動・新モデル登場に対応しやすい

---

## ADR-003: パッケージ管理にuvを採用

### 日付
2025-01-XX

### 背景
Python環境の分離と依存関係管理が必要。

### 選択肢
- A: venv + pip
- B: Poetry
- C: uv

### 決定
**C: uv**を採用

### 理由
- 高速（pip/poetryの10〜100倍）
- シンプル（venvと同じ感覚）
- ロックファイル対応（再現性）

---

## ADR-004: Discord APIの利用可否判断

### 日付
2025-01-XX

### 背景
Discord APIを使った開発が成り立つか、料金・制限・ポリシーを確認した。

### 調査結果

| 項目 | 結果 |
|------|------|
| API料金 | 無料 |
| Bot作成 | 無料 |
| メッセージ取得 | 可能（Gateway Bot） |
| ファイル取得 | 可能 |
| 通話録音 | 可能（要告知） |
| データのAI利用 | 要約・検索はOK、トレーニングはNG |

### 決定
**Discord APIを使った開発を進める**

### 理由
- 無料で必要な機能がすべて利用可能
- 開発者ポリシーに違反しない用途

### 注意事項
- 50社になったらBot/サーバー設計を見直す
- データのAI学習利用は禁止
- 録音は事前告知必須
