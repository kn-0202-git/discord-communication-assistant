#!/bin/bash

set -e

echo "ðŸš€ æ®‹ã‚Šã®æ–‡æ›¸ã‚’ä½œæˆã—ã¾ã™..."

# -----------------------------------------------------------------------------
# docs/REQUIREMENTS.md
# -----------------------------------------------------------------------------
cat > docs/REQUIREMENTS.md << 'EOF'
# è¦ä»¶å®šç¾©æ›¸

## 1. æ¦‚è¦

### 1.1 ç›®çš„
è«‹è² è€…ã¨ã®ãƒãƒ£ãƒƒãƒˆå±¥æ­´ã‚’AIãŒç›£è¦–ãƒ»ä¿å­˜ã—ã€éŽåŽ»ã®ã‚„ã‚Šå–ã‚Šã‚’å¿˜ã‚Œãªã„ä»•çµ„ã¿ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚

### 1.2 ã‚¹ã‚³ãƒ¼ãƒ—
| Phase | å†…å®¹ |
|-------|------|
| Phase 1 | MVPï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¿å­˜ãƒ»æ¤œç´¢ãƒ»è¦ç´„ãƒ»AIåˆ‡æ›¿ï¼‰ |
| Phase 2 | é€šè©±éŒ²éŸ³ãƒ»æ–‡å­—èµ·ã“ã—ãƒ»Google Driveé€£æº |
| Phase 3 | RAGï¼ˆè³‡æ–™ã‚’èª­ã‚“ã§AIå›žç­”ï¼‰ãƒ»ã‚¯ãƒ©ã‚¦ãƒ‰ç§»è¡Œ |
| Phase 4 | ã‚¹ã‚±ãƒ¼ãƒ«å¯¾å¿œ |

## 2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨å½¹å‰²

| ãƒ¦ãƒ¼ã‚¶ãƒ¼ | å½¹å‰² |
|----------|------|
| ä¾é ¼è€… | ã‚„ã‚Šå–ã‚Šã®ä¸»ä½“ã€ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€… |
| è«‹è² è€… | è¤‡æ•°ç¤¾ã€å„ç¤¾æ•°äºº |
| AI Bot | ç›£è¦–ãƒ»ä¿å­˜ãƒ»é€šçŸ¥ãƒ»å›žç­” |

## 3. éƒ¨å±‹æ§‹é€ 

### 3.1 æ¦‚å¿µ
```
Workspaceï¼ˆæœ€ä¸Šä½ã®éƒ¨å±‹ï¼‰
â”œâ”€â”€ è«‹è² è€…ã”ã¨ or ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ä½œæˆ
â”œâ”€â”€ Workspaceé–“ã¯å®Œå…¨åˆ†é›¢ï¼ˆç›¸äº’ã«è¦‹ãˆãªã„ï¼‰
â”‚
â””â”€â”€ Roomï¼ˆä¸­ã®éƒ¨å±‹ï¼‰
    â”œâ”€â”€ ãƒˆãƒ”ãƒƒã‚¯åˆ¥ or ãƒ¡ãƒ³ãƒãƒ¼åˆ¥
    â”œâ”€â”€ åŒä¸€Workspaceå†…ã§ã¯æƒ…å ±å…±æœ‰å¯èƒ½
    â””â”€â”€ room_type:
        â”œâ”€â”€ "topic" - ãƒˆãƒ”ãƒƒã‚¯åˆ¥ã®ä¼šè©±
        â”œâ”€â”€ "member" - ãƒ¡ãƒ³ãƒãƒ¼é™å®š
        â””â”€â”€ "aggregation" - çµ±åˆãƒ»AIç”¨
```

### 3.2 æƒ…å ±å…±æœ‰ãƒ«ãƒ¼ãƒ«

| é–¢ä¿‚ | å…±æœ‰ | ä¾‹ |
|------|------|-----|
| Workspace A â†” Workspace B | âŒ ä¸å¯ | Aç¤¾ã®æƒ…å ±ã¯Bç¤¾ã«è¦‹ãˆãªã„ |
| Room 1 â†” Room 2ï¼ˆåŒä¸€Workspaceï¼‰ | âšª å¯èƒ½ | è¨­å®šæ¬¡ç¬¬ã§ç›¸äº’å‚ç…§ |
| Room 6ï¼ˆçµ±åˆï¼‰â† Room 1, 2 | âšª é›†ç´„ | AIãŒæƒ…å ±ã‚’ã¾ã¨ã‚ã‚‹ |

### 3.3 Discordã¨ã®å¯¾å¿œ

| æ¦‚å¿µ | Discord |
|------|---------|
| Workspace | ã‚µãƒ¼ãƒãƒ¼ |
| Room | ãƒãƒ£ãƒ³ãƒãƒ« |
| çµ±åˆRoom | ä¾é ¼è€…å°‚ç”¨ãƒãƒ£ãƒ³ãƒãƒ« or åˆ¥ã‚µãƒ¼ãƒãƒ¼ |

## 4. æ©Ÿèƒ½è¦ä»¶

### Phase 1: MVP

#### 4.1 ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¿å­˜
- ã™ã¹ã¦ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’DBã«ä¿å­˜
- ç™ºè¨€è€…ã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€Roomæƒ…å ±ã‚’è¨˜éŒ²
- Workspaceã”ã¨ã«å®Œå…¨åˆ†é›¢

#### 4.2 ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰
- å†™çœŸãƒ»å‹•ç”»ãƒ»ãƒœã‚¤ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¿å­˜
- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’DBã«è¨˜éŒ²
- ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼š`{workspace_id}/{room_id}/{date}/`

#### 4.3 è¦ç´„ã‚³ãƒžãƒ³ãƒ‰
- `/summary` ã§ç›´è¿‘Næ—¥ã®ä¼šè©±ã‚’è¦ç´„
- Roomå˜ä½ or Workspaceå˜ä½ã§æŒ‡å®šå¯èƒ½

#### 4.4 æ¤œç´¢ã‚³ãƒžãƒ³ãƒ‰
- `/search {ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰}` ã§éŽåŽ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¤œç´¢
- Workspaceå†…ã®ã¿æ¤œç´¢ï¼ˆä»–Workspaceã¯æ¤œç´¢ä¸å¯ï¼‰

#### 4.5 é€šçŸ¥æ©Ÿèƒ½
- ä¾é ¼è€…å°‚ç”¨ã®Roomï¼ˆçµ±åˆRoomï¼‰ã¸é€šçŸ¥
- é¡žä¼¼éŽåŽ»æ¡ˆä»¶ãŒã‚ã‚Œã°è‡ªå‹•é€šçŸ¥

#### 4.6 AIè¨­å®š
- æ©Ÿèƒ½ã”ã¨ã«AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãƒ»ãƒ¢ãƒ‡ãƒ«ã‚’è¨­å®šå¯èƒ½
- Workspace/Roomã”ã¨ã«ä¸Šæ›¸ãå¯èƒ½
- è¨­å®šå¤‰æ›´ã¯config.yamlã§ç®¡ç†

### Phase 2: æ‹¡å¼µ

#### 4.7 é€šè©±éŒ²éŸ³
- é€šè©±ã‚’è‡ªå‹•éŒ²éŸ³ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆonï¼‰
- `/record off` ã§ä¸€æ™‚åœæ­¢å¯èƒ½
- éŒ²éŸ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜

#### 4.8 æ–‡å­—èµ·ã“ã—
- éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ†ã‚­ã‚¹ãƒˆåŒ–ï¼ˆWhisper APIï¼‰
- ãƒœã‚¤ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚å¯¾è±¡
- æ–‡å­—èµ·ã“ã—çµæžœã‚’DBã«ä¿å­˜ãƒ»æ¤œç´¢å¯èƒ½

#### 4.9 Google Driveé€£æº
- ãƒ•ã‚¡ã‚¤ãƒ«ã‚’Google Driveã«ä¿å­˜
- è‡ªå‹•ä¿å­˜ï¼šå—ä¿¡æ™‚ã«è‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- æ‰‹å‹•ä¿å­˜ï¼š`/save {folder}` ã§ãƒ•ã‚©ãƒ«ãƒ€æŒ‡å®š
- ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆï¼š`{workspace_name}/{date}/` + ä»»æ„æŒ‡å®š

#### 4.10 ãƒªãƒžã‚¤ãƒ³ãƒ€ãƒ¼
- `/remind {title} {date}` ã§ç™»éŒ²
- æœŸé™å‰ã«çµ±åˆRoomã¸é€šçŸ¥

### Phase 3: RAG

#### 4.11 è³‡æ–™æ¤œç´¢ãƒ»AIå›žç­”
- ä¿å­˜æ¸ˆã¿è³‡æ–™ï¼ˆPDFãƒ»Wordç­‰ï¼‰ã‚’ãƒ™ã‚¯ãƒˆãƒ«åŒ–
- `/ask {è³ªå•}` ã§é–¢é€£è³‡æ–™ã‚’æ¤œç´¢
- AIãŒè³‡æ–™ã‚’åŸºã«å›žç­”ç”Ÿæˆ
- å›žç­”ã«ã¯å‡ºå…¸ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«åãƒ»ãƒšãƒ¼ã‚¸ï¼‰ã‚’å«ã‚ã‚‹

## 5. AIè¦ä»¶

### 5.1 å¯¾å¿œãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼

| ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ | ãƒ¢ãƒ‡ãƒ«ä¾‹ | ç”¨é€” |
|--------------|----------|------|
| OpenAI | GPT-4o, GPT-4o-mini, Whisper, Embeddings | æ±Žç”¨ã€éŸ³å£° |
| Anthropic | Claude 3.5 Sonnet, Haiku | é•·æ–‡ã€ç²¾åº¦é‡è¦– |
| Google | Gemini 1.5 Pro, Flash | å®‰ä¾¡ã€é•·æ–‡ |
| Groq | Llama 3.1, Mixtral | é«˜é€Ÿã€å®‰ä¾¡ |
| ãƒ­ãƒ¼ã‚«ãƒ« | Ollamaï¼ˆLlamaç­‰ï¼‰ | ç„¡æ–™ã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ |

### 5.2 æ©Ÿèƒ½åˆ¥ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š

| æ©Ÿèƒ½ | ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ | ãƒ¢ãƒ‡ãƒ« | ç†ç”± |
|------|--------------|--------|------|
| è¦ç´„ | OpenAI | gpt-4o-mini | ãƒãƒ©ãƒ³ã‚¹è‰¯ã„ |
| é¡žä¼¼æ¤œç´¢ | OpenAI | text-embedding-3-small | æ¨™æº–çš„ |
| RAGå›žç­” | Anthropic | claude-3-5-sonnet | ç²¾åº¦é‡è¦– |
| æ–‡å­—èµ·ã“ã— | OpenAI | whisper-1 | éŸ³å£°å°‚ç”¨ |
| é€šçŸ¥æ–‡ç”Ÿæˆ | Groq | llama-3.1-70b | é«˜é€Ÿãƒ»å®‰ä¾¡ |

### 5.3 è¨­å®šã®ä¸Šæ›¸ã
```yaml
# Workspaceåˆ¥ã®ä¸Šæ›¸ãä¾‹
workspace_overrides:
  workspace_a:
    summary:
      provider: google
      model: gemini-1.5-flash
```

## 6. éžæ©Ÿèƒ½è¦ä»¶

| é …ç›® | è¦ä»¶ |
|------|------|
| ãƒ‡ãƒ¼ã‚¿ä¿æŒ | å‰Šé™¤ã—ãªã„ï¼ˆå±¥æ­´ãŒä¾¡å€¤ï¼‰ |
| æ¨©é™åˆ†é›¢ | Workspace Aã¯ Workspace Bã®ãƒ‡ãƒ¼ã‚¿ã‚’è¦‹ã‚Œãªã„ |
| å¯ç”¨æ€§ | BotãŒè½ã¡ã¦ã‚‚ä¼šè©±ã¯ç¶™ç¶šå¯èƒ½ |
| æ‹¡å¼µæ€§ | 50 Workspaceã¾ã§å¯¾å¿œã§ãã‚‹è¨­è¨ˆ |
| OSäº’æ› | macOS / Windowsä¸¡å¯¾å¿œ |
| ãƒ†ã‚¹ãƒˆ | ã‚³ãƒ¼ãƒ‰ãŒèª­ã‚ãªãã¦ã‚‚å“è³ªæ‹…ä¿ |
| AIæŸ”è»Ÿæ€§ | ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãƒ»ãƒ¢ãƒ‡ãƒ«ã‚’è‡ªç”±ã«åˆ‡æ›¿å¯èƒ½ |

## 7. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### Workspaceï¼ˆæœ€ä¸Šä½ã®éƒ¨å±‹ï¼‰
| ã‚«ãƒ©ãƒ  | åž‹ | èª¬æ˜Ž |
|--------|-----|------|
| id | INTEGER | PK |
| name | TEXT | Workspaceå |
| discord_server_id | TEXT | Discordã‚µãƒ¼ãƒãƒ¼ID |
| ai_config | JSON | AIè¨­å®šã®ä¸Šæ›¸ãï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ |
| created_at | DATETIME | ä½œæˆæ—¥æ™‚ |

### Roomï¼ˆä¸­ã®éƒ¨å±‹ï¼‰
| ã‚«ãƒ©ãƒ  | åž‹ | èª¬æ˜Ž |
|--------|-----|------|
| id | INTEGER | PK |
| workspace_id | INTEGER | FK |
| name | TEXT | Roomå |
| discord_channel_id | TEXT | Discordãƒãƒ£ãƒ³ãƒãƒ«ID |
| room_type | TEXT | topic / member / aggregation |
| ai_config | JSON | AIè¨­å®šã®ä¸Šæ›¸ãï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ |
| created_at | DATETIME | ä½œæˆæ—¥æ™‚ |

### RoomLinkï¼ˆRoomé–“ã®æƒ…å ±å…±æœ‰è¨­å®šï¼‰
| ã‚«ãƒ©ãƒ  | åž‹ | èª¬æ˜Ž |
|--------|-----|------|
| id | INTEGER | PK |
| source_room_id | INTEGER | FKï¼ˆæƒ…å ±å…ƒï¼‰ |
| target_room_id | INTEGER | FKï¼ˆæƒ…å ±å…ˆï¼‰ |
| link_type | TEXT | bidirectional / one_way |

### Messageï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰
| ã‚«ãƒ©ãƒ  | åž‹ | èª¬æ˜Ž |
|--------|-----|------|
| id | INTEGER | PK |
| room_id | INTEGER | FK |
| sender_name | TEXT | ç™ºè¨€è€… |
| sender_id | TEXT | Discord User ID |
| content | TEXT | æœ¬æ–‡ |
| message_type | TEXT | text / image / video / voice |
| discord_message_id | TEXT | Discordãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID |
| timestamp | DATETIME | ç™ºè¨€æ—¥æ™‚ |

### Attachmentï¼ˆæ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
| ã‚«ãƒ©ãƒ  | åž‹ | èª¬æ˜Ž |
|--------|-----|------|
| id | INTEGER | PK |
| message_id | INTEGER | FK |
| file_name | TEXT | å…ƒãƒ•ã‚¡ã‚¤ãƒ«å |
| file_path | TEXT | ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ãƒ‘ã‚¹ |
| drive_path | TEXT | Google Driveãƒ‘ã‚¹ |
| file_type | TEXT | image / video / voice / document |
| file_size | INTEGER | ã‚µã‚¤ã‚ºï¼ˆbytesï¼‰ |
| transcription | TEXT | æ–‡å­—èµ·ã“ã—ï¼ˆéŸ³å£°ç”¨ï¼‰ |

### Documentï¼ˆè³‡æ–™ - Phase 3ï¼‰
| ã‚«ãƒ©ãƒ  | åž‹ | èª¬æ˜Ž |
|--------|-----|------|
| id | INTEGER | PK |
| workspace_id | INTEGER | FK |
| attachment_id | INTEGER | FK |
| content_text | TEXT | æŠ½å‡ºãƒ†ã‚­ã‚¹ãƒˆ |
| embedding | BLOB | ãƒ™ã‚¯ãƒˆãƒ« |

### Reminderï¼ˆãƒªãƒžã‚¤ãƒ³ãƒ€ãƒ¼ï¼‰
| ã‚«ãƒ©ãƒ  | åž‹ | èª¬æ˜Ž |
|--------|-----|------|
| id | INTEGER | PK |
| workspace_id | INTEGER | FK |
| title | TEXT | ä»¶å |
| description | TEXT | è©³ç´° |
| due_date | DATETIME | æœŸé™ |
| status | TEXT | pending / done / cancelled |
| notified | BOOLEAN | é€šçŸ¥æ¸ˆã¿ã‹ |

### VoiceSessionï¼ˆé€šè©±éŒ²éŸ³ - Phase 2ï¼‰
| ã‚«ãƒ©ãƒ  | åž‹ | èª¬æ˜Ž |
|--------|-----|------|
| id | INTEGER | PK |
| room_id | INTEGER | FK |
| start_time | DATETIME | é–‹å§‹æ™‚åˆ» |
| end_time | DATETIME | çµ‚äº†æ™‚åˆ» |
| file_path | TEXT | éŒ²éŸ³ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ |
| transcription | TEXT | æ–‡å­—èµ·ã“ã— |
| participants | TEXT | å‚åŠ è€…ï¼ˆJSONï¼‰ |

## 8. ã‚³ãƒžãƒ³ãƒ‰ä¸€è¦§

| ã‚³ãƒžãƒ³ãƒ‰ | æ©Ÿèƒ½ | Phase |
|----------|------|-------|
| `/summary [days]` | ç›´è¿‘ã®ä¼šè©±ã‚’è¦ç´„ | 1 |
| `/search {keyword}` | éŽåŽ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¤œç´¢ | 1 |
| `/ai-config` | ç¾åœ¨ã®AIè¨­å®šã‚’è¡¨ç¤º | 1 |
| `/remind {title} {date}` | ãƒªãƒžã‚¤ãƒ³ãƒ€ãƒ¼ç™»éŒ² | 2 |
| `/reminders` | ãƒªãƒžã‚¤ãƒ³ãƒ€ãƒ¼ä¸€è¦§ | 2 |
| `/record on/off` | é€šè©±éŒ²éŸ³ã®åˆ‡æ›¿ | 2 |
| `/transcribe` | ç›´è¿‘éŸ³å£°ã‚’æ–‡å­—èµ·ã“ã— | 2 |
| `/save [folder]` | æŒ‡å®šãƒ•ã‚©ãƒ«ãƒ€ã«Driveä¿å­˜ | 2 |
| `/docs` | Workspaceã®è³‡æ–™ä¸€è¦§ | 2 |
| `/ask {question}` | è³‡æ–™ã‚’åŸºã«AIå›žç­” | 3 |

## 9. å¤–éƒ¨é€£æº

| ã‚µãƒ¼ãƒ“ã‚¹ | ç”¨é€” | Phase |
|----------|------|-------|
| Discord API | Botã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—ã€é€šè©± | 1 |
| OpenAI API | è¦ç´„ã€Embeddingsã€Whisper | 1-3 |
| Anthropic API | RAGå›žç­”ç­‰ | 1-3 |
| Google AI API | è¦ç´„ç­‰ï¼ˆå®‰ä¾¡ç‰ˆï¼‰ | 1-3 |
| Groq API | é«˜é€ŸæŽ¨è«– | 1-3 |
| ãƒ­ãƒ¼ã‚«ãƒ«LLM | ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ | 1-3 |
| Google Drive API | ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ | 2 |
| Fly.io | ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚° | 3 |

## 10. åˆ¶ç´„ãƒ»å‰æ

- Discordç„¡æ–™ãƒ—ãƒ©ãƒ³ã§é‹ç”¨
- ãƒ•ã‚¡ã‚¤ãƒ«ä¸Šé™25MB/ä»¶
- AIã¯åˆ¤æ–­ã—ãªã„ï¼ˆãƒ‰ãƒ©ãƒ•ãƒˆç”Ÿæˆã®ã¿ï¼‰
- ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œã‹ã‚‰ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆmacOS / Windowsï¼‰
- éŒ²éŸ³ã¯è«‹è² è€…ã«äº‹å‰å‘ŠçŸ¥ãŒå¿…è¦
- AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¯å¿…è¦ãªã‚‚ã®ã®ã¿è¨­å®šã™ã‚Œã°ã‚ˆã„

## 11. Discord APIåˆ¶ç´„

### 11.1 æ–™é‡‘
- Discord APIï¼šç„¡æ–™
- Botä½œæˆï¼šç„¡æ–™
- Discord Nitroï¼šä¸è¦ï¼ˆç„¡æ–™ãƒ—ãƒ©ãƒ³ã§ååˆ†ï¼‰

### 11.2 åˆ¶é™

| é …ç›® | åˆ¶é™ | å½±éŸ¿ |
|------|------|------|
| Botä½œæˆã‚µãƒ¼ãƒãƒ¼ | 10å€‹/Bot | 5ç¤¾ã¯OKã€50ç¤¾ã§è¦æ¤œè¨Ž |
| ãƒ¬ãƒ¼ãƒˆåˆ¶é™ | 50ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ç§’ | å°è¦æ¨¡ãªã‚‰å•é¡Œãªã— |
| ã‚·ãƒ£ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å¿…é ˆ | 2,500ã‚µãƒ¼ãƒãƒ¼ä»¥ä¸Š | å½“é¢ä¸è¦ |

### 11.3 ç¦æ­¢äº‹é …ï¼ˆé–‹ç™ºè€…ãƒãƒªã‚·ãƒ¼ï¼‰

| ç¦æ­¢äº‹é … | ä»Šå›žã®å¯¾å¿œ |
|----------|-----------|
| ãƒ‡ãƒ¼ã‚¿ã®AIå­¦ç¿’åˆ©ç”¨ | âŒ ã—ãªã„ï¼ˆRAGã¯ä½¿ç”¨å¯ï¼‰ |
| ãƒ‡ãƒ¼ã‚¿ã®å•†æ¥­åŒ–ãƒ»è²©å£² | âŒ ã—ãªã„ï¼ˆè‡ªç¤¾åˆ©ç”¨ã®ã¿ï¼‰ |
| ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚° | âŒ ã—ãªã„ï¼ˆå‚åŠ ã‚µãƒ¼ãƒãƒ¼ã®ã¿ï¼‰ |
| 13æ­³æœªæº€ã®åˆ©ç”¨ | âŒ æ¥­å‹™ç”¨ãªã®ã§è©²å½“ãªã— |

### 11.4 æŽ¨å¥¨äº‹é …

- **ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ç”¨**ï¼ˆå…¬é–‹ã‚µãƒ¼ãƒãƒ¼ã¯ãƒªã‚¹ã‚¯ã‚ã‚Šï¼‰
- **éŒ²éŸ³ã¯è«‹è² è€…ã«äº‹å‰å‘ŠçŸ¥**ï¼ˆæ³•çš„ãƒ»ä¿¡é ¼é–¢ä¿‚ä¸Šå¿…é ˆï¼‰
- **ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚’è€ƒæ…®ã—ãŸã‚³ãƒ¼ãƒ‰å®Ÿè£…**
EOF

echo "âœ… docs/REQUIREMENTS.md ã‚’ä½œæˆã—ã¾ã—ãŸ"

# -----------------------------------------------------------------------------
# docs/ARCHITECTURE.md
# -----------------------------------------------------------------------------
cat > docs/ARCHITECTURE.md << 'EOF'
# ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

## 1. ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“å›³
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    Discord                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Workspace Aï¼ˆAç¤¾ã‚µãƒ¼ãƒãƒ¼ï¼‰      â”‚    â”‚  Workspace Bï¼ˆBç¤¾ã‚µãƒ¼ãƒãƒ¼ï¼‰      â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚     â”‚
â”‚  â”‚  â”‚  Room 1   â”‚ â”‚  Room 2   â”‚   â”‚    â”‚  â”‚  Room 3   â”‚ â”‚  Room 4   â”‚   â”‚     â”‚
â”‚  â”‚  â”‚ æŠ€è¡“ç›¸è«‡  â”‚ â”‚ äº‹å‹™é€£çµ¡  â”‚   â”‚    â”‚  â”‚ æŠ€è¡“ç›¸è«‡  â”‚ â”‚ ç´å“ç®¡ç†  â”‚   â”‚     â”‚
â”‚  â”‚  â”‚           â”‚ â”‚           â”‚   â”‚    â”‚  â”‚           â”‚ â”‚           â”‚   â”‚     â”‚
â”‚  â”‚  â”‚ ðŸ‘¤è«‹è² è€…  â”‚ â”‚ ðŸ‘¤è«‹è² è€…  â”‚   â”‚    â”‚  â”‚ ðŸ‘¤è«‹è² è€…  â”‚ â”‚ ðŸ‘¤è«‹è² è€…  â”‚   â”‚     â”‚
â”‚  â”‚  â”‚ ðŸ‘¤ä¾é ¼è€…  â”‚ â”‚ ðŸ‘¤ä¾é ¼è€…  â”‚   â”‚    â”‚  â”‚ ðŸ‘¤ä¾é ¼è€…  â”‚ â”‚ ðŸ‘¤ä¾é ¼è€…  â”‚   â”‚     â”‚
â”‚  â”‚  â”‚ ðŸ¤–Bot     â”‚ â”‚ ðŸ¤–Bot     â”‚   â”‚    â”‚  â”‚ ðŸ¤–Bot     â”‚ â”‚ ðŸ¤–Bot     â”‚   â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚     â”‚
â”‚  â”‚        â”‚             â”‚         â”‚    â”‚                                 â”‚     â”‚
â”‚  â”‚        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â”‚    â”‚        âŒ æƒ…å ±å…±æœ‰ãªã—          â”‚     â”‚
â”‚  â”‚               â–¼                â”‚    â”‚                                 â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”‚  â”‚  Room 6ï¼ˆçµ±åˆRoomï¼‰    â”‚     â”‚                                            â”‚
â”‚  â”‚  â”‚  ðŸ”” é€šçŸ¥ãƒ»è¦ç´„         â”‚     â”‚                                            â”‚
â”‚  â”‚  â”‚  ðŸ’¬ AIã¨ä¾é ¼è€…ã®ä¼šè©±   â”‚     â”‚                                            â”‚
â”‚  â”‚  â”‚                       â”‚     â”‚                                            â”‚
â”‚  â”‚  â”‚  ðŸ‘¤ä¾é ¼è€…ã®ã¿         â”‚     â”‚                                            â”‚
â”‚  â”‚  â”‚  ðŸ¤–Bot                â”‚     â”‚                                            â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â”‚ Discord API
                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Botï¼ˆãƒ­ãƒ¼ã‚«ãƒ«PCï¼‰                                   â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     Listeners       â”‚    â”‚      Commands       â”‚    â”‚    AI Router     â”‚   â”‚
â”‚  â”‚                     â”‚    â”‚                     â”‚    â”‚                  â”‚   â”‚
â”‚  â”‚ â€¢ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡    â”‚    â”‚ â€¢ /summary          â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚ â€¢ ãƒ•ã‚¡ã‚¤ãƒ«å—ä¿¡      â”‚    â”‚ â€¢ /search           â”‚    â”‚ â”‚   OpenAI     â”‚ â”‚   â”‚
â”‚  â”‚ â€¢ é€šè©±æ¤œå‡º          â”‚    â”‚ â€¢ /ask              â”‚    â”‚ â”‚  Anthropic   â”‚ â”‚   â”‚
â”‚  â”‚ â€¢ ã‚µãƒ¼ãƒãƒ¼å‚åŠ       â”‚    â”‚ â€¢ /remind           â”‚    â”‚ â”‚   Google     â”‚ â”‚   â”‚
â”‚  â”‚                     â”‚    â”‚ â€¢ /record on/off    â”‚    â”‚ â”‚    Groq      â”‚ â”‚   â”‚
â”‚  â”‚                     â”‚    â”‚ â€¢ /save             â”‚    â”‚ â”‚   Local      â”‚ â”‚   â”‚
â”‚  â”‚                     â”‚    â”‚ â€¢ /docs             â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚                          â”‚                        â”‚             â”‚
â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                            â–¼                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                            Core                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚    Database     â”‚  â”‚    Storage      â”‚  â”‚     AI Services         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Workspace     â”‚  â”‚ â€¢ Local files   â”‚  â”‚ â€¢ Summarizerï¼ˆè¦ç´„ï¼‰    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Room          â”‚  â”‚ â€¢ Google Drive  â”‚  â”‚ â€¢ Searchï¼ˆæ¤œç´¢ï¼‰        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Message       â”‚  â”‚                 â”‚  â”‚ â€¢ Transcribeï¼ˆæ–‡å­—èµ·ã“ã—ï¼‰â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Attachment    â”‚  â”‚                 â”‚  â”‚ â€¢ RAGï¼ˆè³‡æ–™å›žç­”ï¼‰       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Reminder      â”‚  â”‚                 â”‚  â”‚                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                         â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ SQLite/PostgreSQLâ”‚  â”‚ ãƒ­ãƒ¼ã‚«ãƒ«/GDrive â”‚  â”‚                         â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 2. ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¥ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### 2.1 ä¾é ¼è€…ï¼ˆã‚ãªãŸï¼‰ãŒã§ãã‚‹ã“ã¨

| å ´æ‰€ | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | èª¬æ˜Ž |
|------|------------|------|
| å…¨Room | ãƒãƒ£ãƒƒãƒˆ | è«‹è² è€…ã¨ã‚„ã‚Šå–ã‚Š |
| å…¨Room | ãƒ•ã‚¡ã‚¤ãƒ«é€å—ä¿¡ | å†™çœŸãƒ»å‹•ç”»ãƒ»è³‡æ–™ |
| å…¨Room | é€šè©± | éŸ³å£°é€šè©± |
| å…¨Room | `/summary` | ä¼šè©±ã‚’è¦ç´„ |
| å…¨Room | `/search` | éŽåŽ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¤œç´¢ |
| å…¨Room | `/remind` | ãƒªãƒžã‚¤ãƒ³ãƒ€ãƒ¼ç™»éŒ² |
| å…¨Room | `/record on/off` | éŒ²éŸ³ã®åˆ‡æ›¿ |
| å…¨Room | `/save` | Google Driveã«ä¿å­˜ |
| å…¨Room | `/docs` | è³‡æ–™ä¸€è¦§ |
| å…¨Room | `/ask` | è³‡æ–™ã‚’åŸºã«AIå›žç­” |
| çµ±åˆRoom | é€šçŸ¥å—ä¿¡ | é¡žä¼¼æ¡ˆä»¶ãƒ»ãƒªãƒžã‚¤ãƒ³ãƒ‰ |
| çµ±åˆRoom | AIä¼šè©± | AIã¨ç›¸è«‡ |

### 2.2 è«‹è² è€…ãŒã§ãã‚‹ã“ã¨

| å ´æ‰€ | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | èª¬æ˜Ž |
|------|------------|------|
| è‡ªç¤¾Room | ãƒãƒ£ãƒƒãƒˆ | ä¾é ¼è€…ã¨ã‚„ã‚Šå–ã‚Š |
| è‡ªç¤¾Room | ãƒ•ã‚¡ã‚¤ãƒ«é€ä¿¡ | å†™çœŸãƒ»å‹•ç”»ãƒ»è³‡æ–™ |
| è‡ªç¤¾Room | é€šè©± | éŸ³å£°é€šè©± |
| ä»–ç¤¾Room | âŒ ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯ | è¦‹ãˆãªã„ |

### 2.3 Botï¼ˆAIï¼‰ãŒã§ãã‚‹ã“ã¨

| å ´æ‰€ | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ | èª¬æ˜Ž |
|------|------------|------|
| å…¨Room | ç›£è¦– | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ»ãƒ•ã‚¡ã‚¤ãƒ«å—ä¿¡ |
| å…¨Room | ä¿å­˜ | DBãƒ»ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ |
| å…¨Room | éŒ²éŸ³ | é€šè©±ã‚’éŒ²éŸ³ |
| çµ±åˆRoom | é€šçŸ¥é€ä¿¡ | é¡žä¼¼æ¡ˆä»¶ãƒ»ãƒªãƒžã‚¤ãƒ³ãƒ‰ |
| çµ±åˆRoom | å›žç­” | ã‚³ãƒžãƒ³ãƒ‰ã¸ã®å¿œç­” |

## 3. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 3.1 ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡æ™‚
```
  è«‹è² è€…                                                          ä¾é ¼è€…
    â”‚                                                               â”‚
    â”‚  ã€Œè£½å“XãŒå¤‰è‰²ã—ãŸã€+ å†™çœŸ                                     â”‚
    â–¼                                                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                         â”‚
â”‚ Room 1  â”‚ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Bot   â”‚â”€â”€â”€â”€â–¶â”‚  1. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’DBã«ä¿å­˜                            â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â”‚  2. å†™çœŸã‚’ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜                          â”‚
     â”‚          â”‚  3. é¡žä¼¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¤œç´¢                            â”‚
     â”‚          â”‚  4. é¡žä¼¼ã‚ã‚Š â†’ çµ±åˆRoomã«é€šçŸ¥                       â”‚
     â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚  é¡žä¼¼æ¡ˆä»¶ç™ºè¦‹ï¼
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  çµ±åˆRoomï¼ˆRoom 6ï¼‰                      â”‚
â”‚                                         â”‚
â”‚  ðŸ”” Aç¤¾ã‚¢ãƒ©ãƒ¼ãƒˆ                          â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”                        â”‚
â”‚  ðŸ“· è£½å“å†™çœŸãŒé€ã‚‰ã‚Œã¾ã—ãŸ                â”‚
â”‚  ðŸ’¬ã€Œè£½å“XãŒå¤‰è‰²ã—ã¦ã„ã‚‹ã€               â”‚
â”‚                                         â”‚
â”‚  âš ï¸ é¡žä¼¼æ¡ˆä»¶ç™ºè¦‹ï¼ˆ2024å¹´3æœˆ Bç¤¾ï¼‰        â”‚
â”‚  â†’ åŽŸå› ï¼šä¿ç®¡æ¸©åº¦è¶…éŽ                    â”‚
â”‚  â†’ å¯¾å¿œï¼šãƒ­ãƒƒãƒˆäº¤æ›                      â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 /summary å®Ÿè¡Œæ™‚
```
  ä¾é ¼è€…
    â”‚
    â”‚  /summary 7
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Room 1  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Bot   â”‚â”€â”€â”€â”€â–¶â”‚  1. Room 1ã®ç›´è¿‘7æ—¥é–“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—              â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â”‚  2. AI Router â†’ è¨­å®šã•ã‚ŒãŸAIã‚’é¸æŠž                   â”‚
     â”‚          â”‚  3. AIãŒè¦ç´„ã‚’ç”Ÿæˆ                                   â”‚
     â”‚          â”‚  4. Room 1ã«è¦ç´„ã‚’è¿”ä¿¡                               â”‚
     â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚          â”‚  AI Router ã®é¸æŠž                                   â”‚
     â”‚          â”‚                                                     â”‚
     â”‚          â”‚  config.yaml:                                       â”‚
     â”‚          â”‚    summary:                                         â”‚
     â”‚          â”‚      provider: openai                               â”‚
     â”‚          â”‚      model: gpt-4o-mini                             â”‚
     â”‚          â”‚                                                     â”‚
     â”‚          â”‚  workspace_overrides:                               â”‚
     â”‚          â”‚    workspace_a:                                     â”‚
     â”‚          â”‚      summary:                                       â”‚
     â”‚          â”‚        provider: google                             â”‚
     â”‚          â”‚        model: gemini-1.5-flash   â† ã“ã¡ã‚‰ã‚’ä½¿ç”¨     â”‚
     â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Room 1                                 â”‚
â”‚                                         â”‚
â”‚  ðŸ“‹ ç›´è¿‘7æ—¥é–“ã®è¦ç´„                      â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”                        â”‚
â”‚  ã€æ±ºå®šäº‹é …ã€‘                            â”‚
â”‚  â€¢ è£½å“Xã®ä»•æ§˜å¤‰æ›´ã‚’æ‰¿èª                 â”‚
â”‚  â€¢ ç´æœŸã‚’1é€±é–“å»¶é•·                       â”‚
â”‚                                         â”‚
â”‚  ã€æœªæ±ºäº‹é …ã€‘                            â”‚
â”‚  â€¢ ä¾¡æ ¼æ”¹å®šã«ã¤ã„ã¦è¦æ¤œè¨Ž                â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 4. Workspaceé–“ã®åˆ†é›¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Workspace Aï¼ˆAç¤¾ï¼‰   â”‚    âŒ    â”‚    Workspace Bï¼ˆBç¤¾ï¼‰   â”‚
â”‚                         â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                         â”‚
â”‚  â€¢ Room 1               â”‚  æƒ…å ±    â”‚  â€¢ Room 3               â”‚
â”‚  â€¢ Room 2               â”‚  å…±æœ‰    â”‚  â€¢ Room 4               â”‚
â”‚  â€¢ çµ±åˆRoom             â”‚  ãªã—    â”‚  â€¢ çµ±åˆRoom             â”‚
â”‚                         â”‚          â”‚                         â”‚
â”‚  DB: workspace_id = 1   â”‚          â”‚  DB: workspace_id = 2   â”‚
â”‚  Files: /data/files/1/  â”‚          â”‚  Files: /data/files/2/  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”‚                              â”‚
                    â–¼                              â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚               ä¾é ¼è€…ã®ã¿ä¸¡æ–¹è¦‹ãˆã‚‹           â”‚
            â”‚                                             â”‚
            â”‚  â€¢ Aç¤¾ã®çµ±åˆRoomã§é€šçŸ¥ã‚’å—ã‘ã‚‹              â”‚
            â”‚  â€¢ Bç¤¾ã®çµ±åˆRoomã§é€šçŸ¥ã‚’å—ã‘ã‚‹              â”‚
            â”‚  â€¢ ãã‚Œãžã‚Œç‹¬ç«‹ã€æ··åœ¨ã—ãªã„                 â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 5. Phaseåˆ¥ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

### 5.1 Phase 1ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Discord     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Discord API
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒ­ãƒ¼ã‚«ãƒ«PCï¼ˆmacOS / Windowsï¼‰           â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Bot (discord.py)                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                 â”‚                       â”‚
â”‚                 â–¼                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   SQLite     â”‚  Local Storage   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                 â”‚                       â”‚
â”‚                 â–¼                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  AI Providers (API)              â”‚   â”‚
â”‚  â”‚  OpenAI / Anthropic / etc.       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Phase 3ï¼ˆã‚¯ãƒ©ã‚¦ãƒ‰ï¼‰
````
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Discord     â”‚     â”‚  Google Drive   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚
         â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Fly.io (Docker)                        â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Bot (discord.py)                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                 â”‚                       â”‚
â”‚                 â–¼                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  PostgreSQL  â”‚  Cloud Storage   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                 â”‚                       â”‚
â”‚                 â–¼                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  AI Providers (API)              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
````

## 6. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
````
discord-business-assistant/
â”œâ”€â”€ CLAUDE.md
â”œâ”€â”€ README.md
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ uv.lock
â”œâ”€â”€ config.yaml                 # AIè¨­å®šãƒ»ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
â”œâ”€â”€ .python-version
â”œâ”€â”€ .editorconfig
â”œâ”€â”€ .pre-commit-config.yaml
â”œâ”€â”€ .env.example
â”œâ”€â”€ .gitignore
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ VISION.md
â”‚   â”œâ”€â”€ ROADMAP.md
â”‚   â”œâ”€â”€ REQUIREMENTS.md
â”‚   â”œâ”€â”€ ARCHITECTURE.md
â”‚   â”œâ”€â”€ DEVELOPMENT_PLAN.md
â”‚   â”œâ”€â”€ TEST_PLAN.md
â”‚   â”œâ”€â”€ SETUP.md
â”‚   â”œâ”€â”€ USER_GUIDE.md
â”‚   â”œâ”€â”€ TROUBLESHOOTING.md
â”‚   â”œâ”€â”€ DECISIONS.md
â”‚   â””â”€â”€ DISCUSSION_SUMMARY.md
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ config.py
â”‚   â”œâ”€â”€ bot/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ client.py
â”‚   â”‚   â”œâ”€â”€ listeners.py
â”‚   â”‚   â””â”€â”€ commands.py
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ models.py
â”‚   â”‚   â”œâ”€â”€ database.py
â”‚   â”‚   â””â”€â”€ migrations/
â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â”œâ”€â”€ router.py
â”‚   â”‚   â”œâ”€â”€ providers/
â”‚   â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”‚   â”œâ”€â”€ openai.py
â”‚   â”‚   â”‚   â”œâ”€â”€ anthropic.py
â”‚   â”‚   â”‚   â”œâ”€â”€ google.py
â”‚   â”‚   â”‚   â”œâ”€â”€ groq.py
â”‚   â”‚   â”‚   â””â”€â”€ local.py
â”‚   â”‚   â”œâ”€â”€ summarizer.py
â”‚   â”‚   â”œâ”€â”€ search.py
â”‚   â”‚   â”œâ”€â”€ transcribe.py
â”‚   â”‚   â””â”€â”€ rag.py
â”‚   â””â”€â”€ storage/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ base.py
â”‚       â”œâ”€â”€ local.py
â”‚       â””â”€â”€ google_drive.py
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ app.db
â”‚   â””â”€â”€ files/
â””â”€â”€ .github/
    â””â”€â”€ workflows/
        â””â”€â”€ test.yml

## 7. AIè¨­è¨ˆ

### 7.1 æŠ½è±¡åŒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼
```python
# src/ai/base.py
from abc import ABC, abstractmethod

class AIProvider(ABC):
    """AI ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®æŠ½è±¡åŸºåº•ã‚¯ãƒ©ã‚¹"""

    @abstractmethod
    async def generate(self, prompt: str, **kwargs) -> str:
        """ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆ"""
        pass

    @abstractmethod
    async def embed(self, text: str) -> list[float]:
        """ãƒ™ã‚¯ãƒˆãƒ«åŒ–"""
        pass
```

### 7.2 ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°
```python
# src/ai/router.py
class AIRouter:
    """æ©Ÿèƒ½ã«å¿œã˜ãŸAIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’é¸æŠž"""

    def get_provider(
        self,
        purpose: str,  # "summary", "rag_answer", etc.
        workspace_id: str | None = None,
        room_id: str | None = None
    ) -> AIProvider:
        """
        å„ªå…ˆé †ä½:
        1. Roomè¨­å®š
        2. Workspaceè¨­å®š
        3. ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š
        """
```

### 7.3 è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆconfig.yamlï¼‰
```yaml
ai_providers:
  openai:
    api_key: ${OPENAI_API_KEY}
    models:
      - gpt-4o
      - gpt-4o-mini
      - text-embedding-3-small
      - whisper-1
  anthropic:
    api_key: ${ANTHROPIC_API_KEY}
    models:
      - claude-3-5-sonnet-20241022
      - claude-3-haiku-20240307
  google:
    api_key: ${GOOGLE_API_KEY}
    models:
      - gemini-1.5-pro
      - gemini-1.5-flash
  groq:
    api_key: ${GROQ_API_KEY}
    models:
      - llama-3.1-70b-versatile
  local:
    base_url: ${LOCAL_LLM_BASE_URL}
    models:
      - llama3

ai_routing:
  summary:
    provider: openai
    model: gpt-4o-mini
  search_embedding:
    provider: openai
    model: text-embedding-3-small
  rag_answer:
    provider: anthropic
    model: claude-3-5-sonnet-20241022
  transcription:
    provider: openai
    model: whisper-1
  notification:
    provider: groq
    model: llama-3.1-70b-versatile

workspace_overrides:
  workspace_a:
    summary:
      provider: google
      model: gemini-1.5-flash

room_overrides:
  room_123:
    summary:
      provider: local
      model: llama3
```

## 8. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸è¨­è¨ˆ

### 8.1 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
```
data/files/
â”œâ”€â”€ {workspace_id}/
â”‚   â”œâ”€â”€ {room_id}/
â”‚   â”‚   â”œâ”€â”€ {date}/
â”‚   â”‚   â”‚   â”œâ”€â”€ image_001.jpg
â”‚   â”‚   â”‚   â”œâ”€â”€ video_001.mp4
â”‚   â”‚   â”‚   â””â”€â”€ voice_001.ogg
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ ...
â””â”€â”€ ...
```

## 9. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 9.1 AIé–¢é€£
```python
class AIProviderError(Exception):
    """AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ã‚¨ãƒ©ãƒ¼"""
    pass

class AIProviderNotConfiguredError(AIProviderError):
    """ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„"""
    pass

class AIQuotaExceededError(AIProviderError):
    """APIåˆ¶é™è¶…éŽ"""
    pass
```

### 9.2 ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
```yaml
ai_fallback:
  summary:
    - provider: openai
      model: gpt-4o-mini
    - provider: google
      model: gemini-1.5-flash
    - provider: local
      model: llama3
```

## 10. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

| é …ç›® | å¯¾ç­– |
|------|------|
| APIã‚­ãƒ¼ | ç’°å¢ƒå¤‰æ•° or .envï¼ˆã‚³ãƒŸãƒƒãƒˆã—ãªã„ï¼‰ |
| config.yaml | ${ENV_VAR}å½¢å¼ã§ç’°å¢ƒå¤‰æ•°å‚ç…§ |
| Workspaceåˆ†é›¢ | DBã‚¯ã‚¨ãƒªã§å¿…ãšworkspace_idã‚’æ¡ä»¶ã« |
| éŒ²éŸ³ | è«‹è² è€…ã«äº‹å‰å‘ŠçŸ¥ |
| ãƒ•ã‚¡ã‚¤ãƒ« | data/ä»¥ä¸‹ï¼ˆ.gitignoreï¼‰ |

## 11. Claude Codeè¨­å®š

### 11.1 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
```
.claude/
â”œâ”€â”€ commands/           # ã‚«ã‚¹ã‚¿ãƒ ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒžãƒ³ãƒ‰
â”‚   â”œâ”€â”€ implement.md    # /project:implement
â”‚   â”œâ”€â”€ review.md       # /project:review
â”‚   â”œâ”€â”€ test.md         # /project:test
â”‚   â”œâ”€â”€ fix-issue.md    # /project:fix-issue
â”‚   â””â”€â”€ refactor.md     # /project:refactor
â””â”€â”€ agents/             # ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
    â”œâ”€â”€ python-expert.md
    â”œâ”€â”€ security-reviewer.md
    â”œâ”€â”€ code-reviewer.md
    â”œâ”€â”€ qa-reviewer.md
    â””â”€â”€ discord-expert.md
```

### 11.2 ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ•ãƒ­ãƒ¼
```
/project:review ã‚’å®Ÿè¡Œ
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆä¸¦åˆ—å®Ÿè¡Œ                          â”‚
â”‚                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ python-    â”‚ â”‚ security-  â”‚ â”‚ code-       â”‚ â”‚
â”‚  â”‚ expert     â”‚ â”‚ reviewer   â”‚ â”‚ reviewer    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ qa-        â”‚ â”‚ discord-   â”‚                 â”‚
â”‚  â”‚ reviewer   â”‚ â”‚ expert     â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
    çµæžœçµ±åˆ
        â”‚
        â–¼
  Critical / Warning / Suggestion ã«åˆ†é¡žã—ã¦å ±å‘Š
```
EOF

echo "âœ… docs/ARCHITECTURE.md ã‚’ä½œæˆã—ã¾ã—ãŸ"

# -----------------------------------------------------------------------------
# docs/DEVELOPMENT_PLAN.md
# -----------------------------------------------------------------------------
cat > docs/DEVELOPMENT_PLAN.md << 'EOF'
# é–‹ç™ºè¨ˆç”»

## 1. ç¾åœ¨ã®çŠ¶æ³

**â†’ Phase 1 æº–å‚™å®Œäº†ï¼ˆãƒªãƒã‚¸ãƒˆãƒªä½œæˆæ¸ˆã¿ï¼‰**

### å®Œäº†
- [x] è¦ä»¶å®šç¾©
- [x] æ–‡æ›¸æ§‹æˆç¢ºå®š
- [x] å…¨æ–‡æ›¸ä½œæˆ
- [x] AIè¨­è¨ˆï¼ˆè¤‡æ•°ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å¯¾å¿œï¼‰
- [x] é–‹ç™ºç’°å¢ƒè¨­è¨ˆï¼ˆuv + ruff + pre-commitï¼‰
- [x] GitHubãƒªãƒã‚¸ãƒˆãƒªä½œæˆ
- [x] åˆæœŸãƒ•ã‚¡ã‚¤ãƒ«é…ç½®

### æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
- [ ] Issue #1 èµ·ç¥¨
- [ ] é–‹ç™ºé–‹å§‹

## 2. é–‹ç™ºæ–¹é‡

- ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼ˆTDDï¼‰
- GitHub Issueé§†å‹•
- 1 Issue = 1 PR = 1 æ©Ÿèƒ½
- Claude Codeã§å®Ÿè£…è£œåŠ©
- 9ã¤ã®å°‚é–€å®¶è¦–ç‚¹ã§ãƒ¬ãƒ“ãƒ¥ãƒ¼

## 3. Phase 1 è©³ç´°ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

### Week 1: åŸºç›¤æ§‹ç¯‰

| Issue | ã‚¿ã‚¹ã‚¯ | å®Œäº†æ¡ä»¶ | çŠ¶æ…‹ |
|-------|--------|----------|------|
| #1 | DBè¨­è¨ˆãƒ»å®Ÿè£… | models.pyã€ãƒ†ã‚¹ãƒˆé€šéŽ | æœªç€æ‰‹ |
| #2 | Discord BotåŸºç›¤ | æŽ¥ç¶šç¢ºèªã€ã‚¤ãƒ™ãƒ³ãƒˆå—ä¿¡ | æœªç€æ‰‹ |
| #3 | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¿å­˜ | ãƒ†ã‚¹ãƒˆé€šéŽ | æœªç€æ‰‹ |

### Week 2: Botæ©Ÿèƒ½

| Issue | ã‚¿ã‚¹ã‚¯ | å®Œäº†æ¡ä»¶ | çŠ¶æ…‹ |
|-------|--------|----------|------|
| #4 | æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ | å†™çœŸãƒ»å‹•ç”»ä¿å­˜æˆåŠŸ | æœªç€æ‰‹ |
| #5 | Workspace/Roomåˆ†é›¢ | æ§‹é€ é€šã‚Šã«åˆ†é›¢ç¢ºèª | æœªç€æ‰‹ |
| #6 | ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ | ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ãƒ»å–å¾— | æœªç€æ‰‹ |

### Week 3: AIé€£æº

| Issue | ã‚¿ã‚¹ã‚¯ | å®Œäº†æ¡ä»¶ | çŠ¶æ…‹ |
|-------|--------|----------|------|
| #7 | AIåŸºç›¤ï¼ˆbase, routerï¼‰ | æŠ½è±¡åŒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼å®Œæˆ | æœªç€æ‰‹ |
| #8 | OpenAIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ | æŽ¥ç¶šãƒ»ãƒ†ã‚¹ãƒˆé€šéŽ | æœªç€æ‰‹ |
| #9 | /summaryå®Ÿè£… | è¦ç´„ç”Ÿæˆç¢ºèª | æœªç€æ‰‹ |
| #10 | /searchå®Ÿè£… | æ¤œç´¢çµæžœè¿”å´ç¢ºèª | æœªç€æ‰‹ |

### Week 4: çµ±åˆãƒ»ãƒ†ã‚¹ãƒˆ

| Issue | ã‚¿ã‚¹ã‚¯ | å®Œäº†æ¡ä»¶ | çŠ¶æ…‹ |
|-------|--------|----------|------|
| #11 | çµ±åˆRoomé€šçŸ¥ | é€šçŸ¥é€ä¿¡æˆåŠŸ | æœªç€æ‰‹ |
| #12 | ä»–AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è¿½åŠ  | Anthropic, Google, Groq | æœªç€æ‰‹ |
| #13 | çµ±åˆãƒ†ã‚¹ãƒˆ | å…¨æ©Ÿèƒ½é€£æºç¢ºèª | æœªç€æ‰‹ |
| #14 | è©¦é¨“é‹ç”¨æº–å‚™ | 1ç¤¾åˆ†ã®Workspaceæ§‹ç¯‰ | æœªç€æ‰‹ |

## 4. Issue ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
```markdown
## æ¦‚è¦
ä½•ã‚’å®Ÿè£…ã™ã‚‹ã‹

## å®Œäº†æ¡ä»¶
- [ ] ãƒ†ã‚¹ãƒˆãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹
- [ ] å®Ÿè£…ãŒå®Œäº†ã—ã¦ã„ã‚‹
- [ ] å…¨ãƒ†ã‚¹ãƒˆé€šéŽ
- [ ] ruff check é€šéŽ
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ï¼ˆå¿…è¦ãªã‚‰ï¼‰

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- REQUIREMENTS.md: #{ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç•ªå·}
- ARCHITECTURE.md: #{ã‚»ã‚¯ã‚·ãƒ§ãƒ³ç•ªå·}

## ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
- TEST_PLAN.md: {ãƒ†ã‚¹ãƒˆID}

## å°‚é–€å®¶ãƒã‚§ãƒƒã‚¯
- [ ] ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢è¦–ç‚¹
- [ ] Pythonè¦–ç‚¹
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦–ç‚¹
- [ ] QAè¦–ç‚¹
```

## 5. PR ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
```markdown
## å¯¾å¿œIssue
closes #XX

## å¤‰æ›´å†…å®¹
-

## ãƒ†ã‚¹ãƒˆçµæžœ
uv run pytest tests/ -v ã®å‡ºåŠ›

## ç¢ºèªäº‹é …
- [ ] å…¨ãƒ†ã‚¹ãƒˆé€šéŽ
- [ ] ruff check é€šéŽ
- [ ] pyright é€šéŽï¼ˆè­¦å‘Šã®ã¿è¨±å®¹ï¼‰
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ï¼ˆå¿…è¦ãªã‚‰ï¼‰
```

## 6. GitHubé‹ç”¨

### ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥
```
main              â† æœ¬ç•ªï¼ˆä¿è­·ï¼‰
â””â”€â”€ feature/issue-{n}  â† æ©Ÿèƒ½é–‹ç™º
```

### ãƒžãƒ¼ã‚¸ãƒ«ãƒ¼ãƒ«
- PRã¯å…¨ãƒ†ã‚¹ãƒˆé€šéŽå¿…é ˆ
- ruff checké€šéŽå¿…é ˆ
- ã‚»ãƒ«ãƒ•ãƒžãƒ¼ã‚¸OKï¼ˆ1äººé–‹ç™ºã®ãŸã‚ï¼‰

## 7. é€²æ—ã®ç¢ºèªæ–¹æ³•

### ãƒ†ã‚¹ãƒˆçµæžœã§åˆ¤æ–­
```bash
uv run pytest tests/ -v
```

- `PASSED` ãŒå¢—ãˆã¦ã„ã‚‹ â†’ é †èª¿
- `FAILED` ãŒã‚ã‚‹ â†’ ä¿®æ­£å¿…è¦

### ã‚«ãƒãƒ¬ãƒƒã‚¸ã§åˆ¤æ–­
```bash
uv run pytest tests/ --cov=src
```

- 70%ä»¥ä¸Š â†’ OK
- 70%æœªæº€ â†’ ãƒ†ã‚¹ãƒˆè¿½åŠ 

### ãƒªãƒ³ãƒˆãƒã‚§ãƒƒã‚¯
```bash
uv run ruff check src/
```

- ã‚¨ãƒ©ãƒ¼0 â†’ OK
- ã‚¨ãƒ©ãƒ¼ã‚ã‚Š â†’ ä¿®æ­£å¿…è¦
EOF

echo "âœ… docs/DEVELOPMENT_PLAN.md ã‚’ä½œæˆã—ã¾ã—ãŸ"

# -----------------------------------------------------------------------------
# docs/TEST_PLAN.md
# -----------------------------------------------------------------------------
cat > docs/TEST_PLAN.md << 'EOF'
# ãƒ†ã‚¹ãƒˆè¨ˆç”»

## 1. ãƒ†ã‚¹ãƒˆæ–¹é‡

- ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼ˆTDDï¼‰
- Red â†’ Green â†’ Refactor
- PRãƒžãƒ¼ã‚¸å‰ã«å…¨ãƒ†ã‚¹ãƒˆé€šéŽå¿…é ˆ
- **ãƒ†ã‚¹ãƒˆçµæžœã§å“è³ªã‚’åˆ¤æ–­ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹**

## 2. ãƒ†ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«

| ãƒ¬ãƒ™ãƒ« | å¯¾è±¡ | ãƒ„ãƒ¼ãƒ« |
|--------|------|--------|
| ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ | å„é–¢æ•°ãƒ»ã‚¯ãƒ©ã‚¹ | pytest |
| çµ±åˆãƒ†ã‚¹ãƒˆ | è¤‡æ•°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é€£æº | pytest |
| E2Eãƒ†ã‚¹ãƒˆ | Botå…¨ä½“å‹•ä½œ | æ‰‹å‹• + dpytest |

## 3. ãƒ†ã‚¹ãƒˆç’°å¢ƒ

- ãƒ†ã‚¹ãƒˆç”¨DB: SQLiteï¼ˆã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªï¼‰
- ãƒ¢ãƒƒã‚¯: pytest-mock, unittest.mock
- Discord: dpytest
- AI: ãƒ¢ãƒƒã‚¯åŒ–ï¼ˆå®Ÿéš›ã®APIå‘¼ã³å‡ºã—ãªã—ï¼‰
- CI: GitHub Actionsï¼ˆmac/win/linuxï¼‰

## 4. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§

### 4.1 DBï¼ˆtests/test_db.pyï¼‰

| ID | ãƒ†ã‚¹ãƒˆå | å†…å®¹ | Phase |
|----|----------|------|-------|
| DB-01 | test_create_workspace | Workspaceä½œæˆ | 1 |
| DB-02 | test_create_room | Roomä½œæˆ | 1 |
| DB-03 | test_save_message | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¿å­˜ | 1 |
| DB-04 | test_save_message_with_attachment | æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ä»˜ãä¿å­˜ | 1 |
| DB-05 | test_get_messages_by_room | Roomåˆ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾— | 1 |
| DB-06 | test_search_messages_in_workspace | Workspaceå†…æ¤œç´¢ | 1 |
| DB-07 | test_workspace_isolation | Workspace Aâ†”Båˆ†é›¢ | 1 |
| DB-08 | test_room_link | Roomé–“æƒ…å ±å…±æœ‰è¨­å®š | 1 |

### 4.2 Botï¼ˆtests/test_bot.pyï¼‰

| ID | ãƒ†ã‚¹ãƒˆå | å†…å®¹ | Phase |
|----|----------|------|-------|
| BOT-01 | test_on_message_saves | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡ã§ä¿å­˜ | 1 |
| BOT-02 | test_attachment_saved | æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ | 1 |
| BOT-03 | test_bot_ignores_own_message | Botè‡ªèº«ã®ç™ºè¨€ã¯ç„¡è¦– | 1 |
| BOT-04 | test_workspace_created_on_join | ã‚µãƒ¼ãƒãƒ¼å‚åŠ æ™‚Workspaceä½œæˆ | 1 |
| BOT-05 | test_room_created_on_channel | ãƒãƒ£ãƒ³ãƒãƒ«æ¤œå‡ºæ™‚Roomä½œæˆ | 1 |

### 4.3 Storageï¼ˆtests/test_storage.pyï¼‰

| ID | ãƒ†ã‚¹ãƒˆå | å†…å®¹ | Phase |
|----|----------|------|-------|
| STR-01 | test_save_file_local | ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ | 1 |
| STR-02 | test_get_file_local | ãƒ­ãƒ¼ã‚«ãƒ«å–å¾— | 1 |
| STR-03 | test_directory_structure | ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆç¢ºèª | 1 |
| STR-04 | test_cross_platform_path | mac/winä¸¡å¯¾å¿œãƒ‘ã‚¹ | 1 |
| STR-05 | test_save_file_drive | Google Driveä¿å­˜ | 2 |
| STR-06 | test_create_folder_drive | Driveãƒ•ã‚©ãƒ«ãƒ€ä½œæˆ | 2 |

### 4.4 AI Routerï¼ˆtests/test_ai_router.pyï¼‰

| ID | ãƒ†ã‚¹ãƒˆå | å†…å®¹ | Phase |
|----|----------|------|-------|
| RTR-01 | test_get_default_provider | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§å–å¾— | 1 |
| RTR-02 | test_workspace_override | Workspaceåˆ¥ä¸Šæ›¸ã | 1 |
| RTR-03 | test_room_override | Roomåˆ¥ä¸Šæ›¸ã | 1 |
| RTR-04 | test_provider_not_configured | æœªè¨­å®šãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã§ã‚¨ãƒ©ãƒ¼ | 1 |
| RTR-05 | test_fallback_on_error | ã‚¨ãƒ©ãƒ¼æ™‚ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ | 1 |

### 4.5 AI Providersï¼ˆtests/test_ai_providers.pyï¼‰

| ID | ãƒ†ã‚¹ãƒˆå | å†…å®¹ | Phase |
|----|----------|------|-------|
| PRV-01 | test_openai_generate | OpenAIç”Ÿæˆï¼ˆãƒ¢ãƒƒã‚¯ï¼‰ | 1 |
| PRV-02 | test_openai_embed | OpenAIåŸ‹ã‚è¾¼ã¿ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰ | 1 |
| PRV-03 | test_anthropic_generate | Anthropicç”Ÿæˆï¼ˆãƒ¢ãƒƒã‚¯ï¼‰ | 1 |
| PRV-04 | test_google_generate | Googleç”Ÿæˆï¼ˆãƒ¢ãƒƒã‚¯ï¼‰ | 1 |
| PRV-05 | test_groq_generate | Groqç”Ÿæˆï¼ˆãƒ¢ãƒƒã‚¯ï¼‰ | 1 |
| PRV-06 | test_local_generate | ãƒ­ãƒ¼ã‚«ãƒ«LLMç”Ÿæˆï¼ˆãƒ¢ãƒƒã‚¯ï¼‰ | 1 |
| PRV-07 | test_whisper_transcribe | Whisperæ–‡å­—èµ·ã“ã—ï¼ˆãƒ¢ãƒƒã‚¯ï¼‰ | 2 |

### 4.6 AIæ©Ÿèƒ½ï¼ˆtests/test_ai.pyï¼‰

| ID | ãƒ†ã‚¹ãƒˆå | å†…å®¹ | Phase |
|----|----------|------|-------|
| AI-01 | test_summarize_messages | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç¾¤ã‚’è¦ç´„ | 1 |
| AI-02 | test_summarize_empty | ç©ºã®å ´åˆã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° | 1 |
| AI-03 | test_summarize_with_workspace_config | Workspaceè¨­å®šã§è¦ç´„ | 1 |
| AI-04 | test_search_similar | é¡žä¼¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¤œç´¢ | 1 |
| AI-05 | test_search_no_result | è©²å½“ãªã—ã®å ´åˆ | 1 |
| AI-06 | test_transcribe_audio | éŸ³å£°æ–‡å­—èµ·ã“ã— | 2 |

### 4.7 ã‚³ãƒžãƒ³ãƒ‰ï¼ˆtests/test_commands.pyï¼‰

| ID | ãƒ†ã‚¹ãƒˆå | å†…å®¹ | Phase |
|----|----------|------|-------|
| CMD-01 | test_summary_command | /summaryå®Ÿè¡Œ | 1 |
| CMD-02 | test_search_command | /searchå®Ÿè¡Œ | 1 |
| CMD-03 | test_search_other_workspace | ä»–Workspaceã¯æ¤œç´¢ä¸å¯ | 1 |
| CMD-04 | test_ai_config_command | /ai-configè¡¨ç¤º | 1 |
| CMD-05 | test_remind_command | /remindå®Ÿè¡Œ | 2 |
| CMD-06 | test_ask_command | /askå®Ÿè¡Œ | 3 |

## 5. AIãƒ¢ãƒƒã‚¯ã®å®Ÿè£…
```python
# tests/conftest.py
import pytest
from unittest.mock import AsyncMock

@pytest.fixture
def mock_ai_provider():
    """AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ãƒ¢ãƒƒã‚¯"""
    provider = AsyncMock()
    provider.generate.return_value = "ã“ã‚Œã¯ãƒ¢ãƒƒã‚¯ã®å¿œç­”ã§ã™"
    provider.embed.return_value = [0.1] * 1536
    return provider

@pytest.fixture
def mock_ai_router(mock_ai_provider):
    """AIãƒ«ãƒ¼ã‚¿ãƒ¼ã®ãƒ¢ãƒƒã‚¯"""
    router = AsyncMock()
    router.get_provider.return_value = mock_ai_provider
    return router
```

## 6. ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™

| Phase | ç›®æ¨™ |
|-------|------|
| Phase 1 | 70%ä»¥ä¸Š |
| Phase 2 | 75%ä»¥ä¸Š |
| Phase 3 | 80%ä»¥ä¸Š |

## 7. ãƒ†ã‚¹ãƒˆçµæžœã®èª­ã¿æ–¹

### æˆåŠŸæ™‚
```
tests/test_db.py::test_create_workspace PASSED
tests/test_ai_router.py::test_get_default_provider PASSED
======================== 2 passed in 0.52s ========================
```

### å¤±æ•—æ™‚
```
tests/test_ai_router.py::test_workspace_override FAILED

>       assert provider.model == "gemini-1.5-flash"
E       AssertionError: assert "gpt-4o-mini" == "gemini-1.5-flash"

======================== 1 failed, 1 passed ========================
```

**å¯¾å¿œæ–¹æ³•ï¼š**
1. ã©ã®ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã—ãŸã‹ç¢ºèª
2. Claude Codeã«ã€Œtest_workspace_overrideãŒå¤±æ•—ã—ã¦ã„ã‚‹ã€‚ä¿®æ­£ã—ã¦ã€ã¨ä¾é ¼
3. å†åº¦ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
EOF

echo "âœ… docs/TEST_PLAN.md ã‚’ä½œæˆã—ã¾ã—ãŸ"

# -----------------------------------------------------------------------------
# docs/SETUP.md
# -----------------------------------------------------------------------------
cat > docs/SETUP.md << 'EOF'
# ç’°å¢ƒæ§‹ç¯‰æ‰‹é †

## 1. å‰ææ¡ä»¶

- Python 3.11ä»¥ä¸Š
- Git
- Discordã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®APIã‚­ãƒ¼ï¼ˆå°‘ãªãã¨ã‚‚1ã¤ï¼‰

## 2. ãƒªãƒã‚¸ãƒˆãƒªå–å¾—
```bash
git clone https://github.com/kn-0202-git/discord-communication-assistant.git
cd discord-communication-assistant
```

## 3. uv ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### macOS / Linux
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

### Windows
```powershell
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
```

### ç¢ºèª
```bash
uv --version
```

## 4. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
uv sync --all-extras
```

## 5. pre-commit è¨­å®š
```bash
uv run pre-commit install
```

## 6. Discord Botä½œæˆ

### 6.1 Developer Portalã§ã‚¢ãƒ—ãƒªä½œæˆ

1. https://discord.com/developers/applications ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€ŒNew Applicationã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ã‚¢ãƒ—ãƒªåã‚’å…¥åŠ›ï¼ˆä¾‹ï¼šBusiness Assistantï¼‰
4. ã€ŒCreateã€ã‚’ã‚¯ãƒªãƒƒã‚¯

### 6.2 Botãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ

1. å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€ŒBotã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã€ŒAdd Botã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ã€ŒReset Tokenã€ã§ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—ï¼ˆã‚³ãƒ”ãƒ¼ã—ã¦ä¿å­˜ï¼‰

### 6.3 æ¨©é™è¨­å®š

1. å·¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€ŒOAuth2ã€â†’ã€ŒURL Generatorã€
2. Scopes:
   - bot
   - applications.commands
3. Bot Permissions:
   - Read Messages/View Channels
   - Send Messages
   - Read Message History
   - Attach Files
   - Connectï¼ˆé€šè©±ç”¨ã€Phase 2ï¼‰
   - Speakï¼ˆé€šè©±ç”¨ã€Phase 2ï¼‰
4. ç”Ÿæˆã•ã‚ŒãŸURLã‚’ã‚³ãƒ”ãƒ¼

### 6.4 ã‚µãƒ¼ãƒãƒ¼ã«æ‹›å¾…

1. ç”Ÿæˆã•ã‚ŒãŸURLã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã
2. æ‹›å¾…å…ˆã‚µãƒ¼ãƒãƒ¼ã‚’é¸æŠž
3. ã€Œèªè¨¼ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

## 7. ç’°å¢ƒå¤‰æ•°è¨­å®š

### .envä½œæˆ
```bash
cp .env.example .env
```

### .envç·¨é›†
```
# å¿…é ˆ
DISCORD_TOKEN=your_discord_bot_token

# DBï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§OKï¼‰
DATABASE_URL=sqlite:///data/app.db

# Storageï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§OKï¼‰
STORAGE_TYPE=local
LOCAL_STORAGE_PATH=data/files

# AIï¼ˆä½¿ã†ã‚‚ã®ã ã‘è¨­å®šï¼‰
OPENAI_API_KEY=your_openai_key
ANTHROPIC_API_KEY=your_anthropic_key
GOOGLE_API_KEY=your_google_key
GROQ_API_KEY=your_groq_key
LOCAL_LLM_BASE_URL=http://localhost:11434
```

## 8. å‹•ä½œç¢ºèª

### ãƒªãƒ³ãƒˆãƒã‚§ãƒƒã‚¯
```bash
uv run ruff check src/
```

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
uv run pytest tests/ -v
```

### Botèµ·å‹•
```bash
uv run python -m src.main
```

## 9. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### uv: command not found

uvã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’å†åº¦å®Ÿè¡Œã€‚ãƒ‘ã‚¹ãŒé€šã£ã¦ã„ã‚‹ã‹ç¢ºèªã€‚
```bash
source ~/.zshrc
```

### ModuleNotFoundError
```bash
uv sync --all-extras
```

### discord.errors.LoginFailure

- DISCORD_TOKENãŒæ­£ã—ã„ã‹ç¢ºèª
- ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¦å†å–å¾—

### openai.error.AuthenticationError

- OPENAI_API_KEYãŒæ­£ã—ã„ã‹ç¢ºèª
- OpenAIã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®æ”¯æ‰•ã„è¨­å®šã‚’ç¢ºèª
EOF

echo "âœ… docs/SETUP.md ã‚’ä½œæˆã—ã¾ã—ãŸ"

# -----------------------------------------------------------------------------
# docs/USER_GUIDE.md
# -----------------------------------------------------------------------------
cat > docs/USER_GUIDE.md << 'EOF'
# åˆ©ç”¨è€…ã‚¬ã‚¤ãƒ‰

ã“ã®ã‚¬ã‚¤ãƒ‰ã¯ã€Discord Business Assistantã‚’åˆ©ç”¨ã™ã‚‹è«‹è² è€…å‘ã‘ã®èª¬æ˜Žè³‡æ–™ã§ã™ã€‚

## 1. Discordã¨ã¯

Discordã¯ã€ãƒãƒ£ãƒƒãƒˆãƒ»é€šè©±ãŒã§ãã‚‹ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
ã‚¹ãƒžãƒ¼ãƒˆãƒ•ã‚©ãƒ³ãƒ»PCä¸¡æ–¹ã§åˆ©ç”¨ã§ãã¾ã™ã€‚

## 2. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

### ã‚¹ãƒžãƒ¼ãƒˆãƒ•ã‚©ãƒ³

1. App Storeï¼ˆiPhoneï¼‰ã¾ãŸã¯Google Playï¼ˆAndroidï¼‰ã‚’é–‹ã
2. ã€ŒDiscordã€ã‚’æ¤œç´¢
3. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
4. ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆï¼ˆãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå¿…è¦ï¼‰

### PC

1. https://discord.com/download ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ãŠä½¿ã„ã®OSã«åˆã‚ã›ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
3. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
4. ãƒ­ã‚°ã‚¤ãƒ³

## 3. ã‚µãƒ¼ãƒãƒ¼ã¸ã®å‚åŠ 

ä¾é ¼è€…ã‹ã‚‰é€ã‚‰ã‚ŒãŸæ‹›å¾…ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ã‚µãƒ¼ãƒãƒ¼ã«å‚åŠ ã§ãã¾ã™ã€‚

## 4. åŸºæœ¬çš„ãªä½¿ã„æ–¹

### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡

1. å·¦å´ã®ãƒãƒ£ãƒ³ãƒãƒ«ä¸€è¦§ã‹ã‚‰ãƒãƒ£ãƒ³ãƒãƒ«ã‚’é¸æŠž
2. ä¸‹éƒ¨ã®å…¥åŠ›æ¬„ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›
3. Enterã‚­ãƒ¼ï¼ˆã¾ãŸã¯ã‚¹ãƒžãƒ›ã®é€ä¿¡ãƒœã‚¿ãƒ³ï¼‰ã§é€ä¿¡

### ãƒ•ã‚¡ã‚¤ãƒ«é€ä¿¡

1. å…¥åŠ›æ¬„ã®å·¦ã«ã‚ã‚‹ã€Œ+ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã€Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€ã‚’é¸æŠž
3. é€ä¿¡ã—ãŸã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠž

### é€šè©±

1. éŸ³å£°ãƒãƒ£ãƒ³ãƒãƒ«ï¼ˆã‚¹ãƒ”ãƒ¼ã‚«ãƒ¼ãƒžãƒ¼ã‚¯ï¼‰ã‚’ã‚¯ãƒªãƒƒã‚¯
2. é€šè©±ã«å‚åŠ 
3. é€€å‡ºã™ã‚‹æ™‚ã¯ã€Œåˆ‡æ–­ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

## 5. ãƒãƒ£ãƒ³ãƒãƒ«ã«ã¤ã„ã¦

ã‚µãƒ¼ãƒãƒ¼å†…ã«ã¯è¤‡æ•°ã®ãƒãƒ£ãƒ³ãƒãƒ«ï¼ˆéƒ¨å±‹ï¼‰ãŒã‚ã‚Šã¾ã™ã€‚

| ãƒãƒ£ãƒ³ãƒãƒ« | ç”¨é€” |
|------------|------|
| #general | ä¸€èˆ¬çš„ãªã‚„ã‚Šå–ã‚Š |
| #æŠ€è¡“ç›¸è«‡ | æŠ€è¡“çš„ãªè³ªå•ãƒ»ç›¸è«‡ |
| #äº‹å‹™é€£çµ¡ | äº‹å‹™çš„ãªé€£çµ¡ |

â€»ãƒãƒ£ãƒ³ãƒãƒ«æ§‹æˆã¯ä¾é ¼è€…ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚

## 6. AI Botã«ã¤ã„ã¦

ã“ã®ã‚µãƒ¼ãƒãƒ¼ã«ã¯ã€AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆï¼ˆBotï¼‰ãŒå‚åŠ ã—ã¦ã„ã¾ã™ã€‚

### Botã®å½¹å‰²

- ä¼šè©±ã®è¨˜éŒ²ãƒ»ä¿å­˜
- ä¾é ¼è€…ã¸ã®é€šçŸ¥
- BotãŒã‚ãªãŸã«ç›´æŽ¥è©±ã—ã‹ã‘ã‚‹ã“ã¨ã¯åŸºæœ¬çš„ã«ã‚ã‚Šã¾ã›ã‚“

### éŒ²éŸ³ã«ã¤ã„ã¦

é€šè©±ã¯è¨˜éŒ²ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
éŒ²éŸ³ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯äº‹å‰ã«ãŠçŸ¥ã‚‰ã›ã—ã¾ã™ã€‚

## 7. å›°ã£ãŸæ™‚ã¯

- ã‚¢ãƒ—ãƒªãŒå‹•ã‹ãªã„ â†’ å†èµ·å‹•ã—ã¦ã¿ã¦ãã ã•ã„
- æ‹›å¾…ãƒªãƒ³ã‚¯ãŒä½¿ãˆãªã„ â†’ ä¾é ¼è€…ã«é€£çµ¡ã—ã¦ãã ã•ã„
- ãã®ä»– â†’ ä¾é ¼è€…ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„

## 8. æ³¨æ„äº‹é …

- ã“ã®ã‚µãƒ¼ãƒãƒ¼ã§ã®ã‚„ã‚Šå–ã‚Šã¯è¨˜éŒ²ã•ã‚Œã¾ã™
- ä»–ã®è«‹è² è€…ã®æƒ…å ±ã¯è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“
- ä¸æ˜Žç‚¹ãŒã‚ã‚Œã°é æ…®ãªãä¾é ¼è€…ã«ã”è³ªå•ãã ã•ã„
EOF

echo "âœ… docs/USER_GUIDE.md ã‚’ä½œæˆã—ã¾ã—ãŸ"

# -----------------------------------------------------------------------------
# docs/DISCUSSION_SUMMARY.md
# -----------------------------------------------------------------------------
cat > docs/DISCUSSION_SUMMARY.md << 'EOF'
# è­°è«–ã®è¦ç´„

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­è¨ˆã«è‡³ã£ãŸè­°è«–ã®è¦ç‚¹ã‚’è¨˜éŒ²ã™ã‚‹ã€‚

---

## 2025-01-01: åˆæœŸè¦ä»¶å®šç¾©

### å‚åŠ è€…
- ä¾é ¼è€…ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰
- Claudeï¼ˆ9ã¤ã®å°‚é–€å®¶è¦–ç‚¹ï¼‰

### è­°è«–ã®è¦ç‚¹

#### 1. èƒŒæ™¯ãƒ»èª²é¡Œ
- ç¾åœ¨WhatsAppã§è«‹è² è€…ã¨ã‚„ã‚Šå–ã‚Šã—ã¦ã„ã‚‹
- éŽåŽ»ã®ã‚„ã‚Šå–ã‚Šã‚’å¿˜ã‚Œã‚‹
- å¼•ãç¶™ãŽãŒå¤§å¤‰
- å†™çœŸãƒ»å‹•ç”»ãŒåŸ‹ã‚‚ã‚Œã‚‹
- æå‡ºç‰©ç®¡ç†ãŒè¨˜æ†¶é ¼ã¿

#### 2. ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ é¸å®š
- WhatsApp â†’ Botä¸å¯ã§å´ä¸‹
- Telegram â†’ ã€Œæ€ªã—ã„ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã§å´ä¸‹
- Slack â†’ å±¥æ­´90æ—¥åˆ¶é™ãŒæ‡¸å¿µ
- Discord â†’ æŽ¡ç”¨ï¼ˆå±¥æ­´ç„¡åˆ¶é™ã€Botè‡ªç”±ï¼‰

#### 3. éƒ¨å±‹æ§‹é€ ã®è¨­è¨ˆ
- Workspaceï¼ˆæœ€ä¸Šä½ï¼‰= Discordã‚µãƒ¼ãƒãƒ¼ = è«‹è² è€…ã”ã¨
- Roomï¼ˆä¸­ã®éƒ¨å±‹ï¼‰= Discordãƒãƒ£ãƒ³ãƒãƒ« = ãƒˆãƒ”ãƒƒã‚¯/ãƒ¡ãƒ³ãƒãƒ¼ã”ã¨
- Workspaceé–“ã¯å®Œå…¨åˆ†é›¢
- Roomé–“ã¯æƒ…å ±å…±æœ‰å¯èƒ½

#### 4. AIè¨­è¨ˆ
- è¤‡æ•°ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å¯¾å¿œï¼ˆOpenAI, Anthropic, Google, Groq, ãƒ­ãƒ¼ã‚«ãƒ«ï¼‰
- æ©Ÿèƒ½ã”ã¨ã«AIã‚’è¨­å®šå¯èƒ½
- Workspace/Roomã”ã¨ã«ä¸Šæ›¸ãå¯èƒ½

#### 5. é–‹ç™ºç’°å¢ƒ
- Python + uvï¼ˆãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ï¼‰
- ruffï¼ˆãƒªãƒ³ã‚¿ãƒ¼/ãƒ•ã‚©ãƒ¼ãƒžãƒƒã‚¿ãƒ¼ï¼‰
- pre-commitï¼ˆã‚³ãƒŸãƒƒãƒˆå‰ãƒã‚§ãƒƒã‚¯ï¼‰
- TDDï¼ˆãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼‰
- macOS / Windows ä¸¡å¯¾å¿œ

#### 6. Phaseåˆ†ã‘
- Phase 1: MVPï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¿å­˜ã€è¦ç´„ã€æ¤œç´¢ï¼‰
- Phase 2: é€šè©±éŒ²éŸ³ã€Google Driveé€£æº
- Phase 3: RAGã€ã‚¯ãƒ©ã‚¦ãƒ‰ç§»è¡Œ
- Phase 4: ã‚¹ã‚±ãƒ¼ãƒ«å¯¾å¿œ

### æ±ºå®šäº‹é …
- Discordã‚’ä½¿ç”¨
- è¤‡æ•°AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å¯¾å¿œ
- uv + ruff + pre-commit
- 9ã¤ã®å°‚é–€å®¶è¦–ç‚¹ã§é–‹ç™º

---

## 2025-01-01: Discord APIèª¿æŸ»

### èª¿æŸ»å†…å®¹
- Discord APIã®æ–™é‡‘ãƒ»åˆ¶é™ãƒ»ãƒãƒªã‚·ãƒ¼ã‚’ç¢ºèª

### çµæžœ

| é …ç›® | çµæžœ |
|------|------|
| APIæ–™é‡‘ | ç„¡æ–™ |
| Botä½œæˆ | ç„¡æ–™ |
| ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾— | å¯èƒ½ |
| é€šè©±éŒ²éŸ³ | å¯èƒ½ï¼ˆè¦å‘ŠçŸ¥ï¼‰ |
| ãƒ‡ãƒ¼ã‚¿ã®AIå­¦ç¿’åˆ©ç”¨ | ç¦æ­¢ |

### æ±ºå®šäº‹é …
- Discord APIã‚’ä½¿ã£ãŸé–‹ç™ºã‚’é€²ã‚ã‚‹
- ãƒ‡ãƒ¼ã‚¿ã®AIå­¦ç¿’åˆ©ç”¨ã¯ç¦æ­¢ï¼ˆRAGã¯ä½¿ç”¨å¯ï¼‰
- éŒ²éŸ³ã¯è«‹è² è€…ã«äº‹å‰å‘ŠçŸ¥å¿…é ˆ

---

## 2025-01-01: Claude Codeé‹ç”¨è¨­è¨ˆ

### è­°è«–å†…å®¹
- Claude Codeã®åŠ¹æžœçš„ãªé‹ç”¨æ–¹æ³•ã‚’æ¤œè¨Ž
- å‚è€ƒè¨˜äº‹ã‚’åŸºã«5ã¤ã®åž‹ã‚’å–ã‚Šå…¥ã‚Œ

### æŽ¡ç”¨ã—ãŸé‹ç”¨æ–¹æ³•

1. ã‚«ã‚¹ã‚¿ãƒ ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒžãƒ³ãƒ‰
   - /project:implement
   - /project:review
   - /project:test
   - /project:fix-issue
   - /project:refactor

2. ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
   - python-expert
   - security-reviewer
   - code-reviewer
   - qa-reviewer
   - discord-expert

3. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç®¡ç†
   - docs/prompts/ ã«ä¿å­˜
   - å†åˆ©ç”¨å¯èƒ½ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ã—ã¦ç®¡ç†

### æ±ºå®šäº‹é …
- .claude/commands/ ã«ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒžãƒ³ãƒ‰é…ç½®
- .claude/agents/ ã«ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé…ç½®
- ãƒ¬ãƒ“ãƒ¥ãƒ¼æ™‚ã¯ä¸¦åˆ—å®Ÿè¡Œ

---

## 2025-01-01: å°‚é–€å®¶ä½“åˆ¶ã®ç¢ºå®š

### è­°è«–å†…å®¹
- å½“åˆ8ã¤ã®å°‚é–€å®¶è¦–ç‚¹ã§é–‹ç™ºäºˆå®š
- ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ã®å½¹å‰²ãŒä¸è¶³ã—ã¦ã„ã‚‹ã“ã¨ã‚’æŒ‡æ‘˜

### æ±ºå®šäº‹é …
- 9ã¤ã®å°‚é–€å®¶ä½“åˆ¶ã«å¤‰æ›´
  1. ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
  2. Pythoné–‹ç™ºè€…
  3. ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ï¼ˆè¿½åŠ ï¼‰
  4. UI/UXãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼
  5. åŒ–å­¦ç³»ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆï¼‰
  6. æ•™è‚²è€…
  7. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
  8. QAã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
  9. AIã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢

---

ï¼ˆä»Šå¾Œã®è­°è«–ã‚’è¿½è¨˜ï¼‰
EOF

echo "âœ… docs/DISCUSSION_SUMMARY.md ã‚’ä½œæˆã—ã¾ã—ãŸ"

# -----------------------------------------------------------------------------
# config.yaml
# -----------------------------------------------------------------------------
cat > config.yaml << 'EOF'
# =============================================================================
# Discord Business Assistant - AI Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# AI Providers
# APIã‚­ãƒ¼ã¯ç’°å¢ƒå¤‰æ•°ã‹ã‚‰å–å¾—ï¼ˆ${VAR_NAME}å½¢å¼ï¼‰
# -----------------------------------------------------------------------------
ai_providers:
  openai:
    api_key: ${OPENAI_API_KEY}
    models:
      - gpt-4o
      - gpt-4o-mini
      - text-embedding-3-small
      - text-embedding-3-large
      - whisper-1

  anthropic:
    api_key: ${ANTHROPIC_API_KEY}
    models:
      - claude-3-5-sonnet-20241022
      - claude-3-haiku-20240307

  google:
    api_key: ${GOOGLE_API_KEY}
    models:
      - gemini-1.5-pro
      - gemini-1.5-flash

  groq:
    api_key: ${GROQ_API_KEY}
    models:
      - llama-3.1-70b-versatile
      - llama-3.1-8b-instant
      - mixtral-8x7b-32768

  local:
    base_url: ${LOCAL_LLM_BASE_URL}
    models:
      - llama3
      - mistral
      - codellama

# -----------------------------------------------------------------------------
# AI Routing
# æ©Ÿèƒ½ã”ã¨ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆAIè¨­å®š
# -----------------------------------------------------------------------------
ai_routing:
  summary:
    provider: openai
    model: gpt-4o-mini

  search_embedding:
    provider: openai
    model: text-embedding-3-small

  rag_answer:
    provider: anthropic
    model: claude-3-5-sonnet-20241022

  transcription:
    provider: openai
    model: whisper-1

  notification:
    provider: groq
    model: llama-3.1-70b-versatile

  similar_search:
    provider: openai
    model: gpt-4o-mini

# -----------------------------------------------------------------------------
# Workspace Overrides
# ç‰¹å®šã®Workspaceã§ã®AIè¨­å®šä¸Šæ›¸ã
# -----------------------------------------------------------------------------
workspace_overrides:
  # ä¾‹ï¼šworkspace_aã§ã¯è¦ç´„ã«Geminiã‚’ä½¿ã†
  # workspace_a:
  #   summary:
  #     provider: google
  #     model: gemini-1.5-flash

# -----------------------------------------------------------------------------
# Room Overrides
# ç‰¹å®šã®Roomã§ã®AIè¨­å®šä¸Šæ›¸ã
# -----------------------------------------------------------------------------
room_overrides:
  # ä¾‹ï¼šç‰¹å®šã®Roomã§ã¯ãƒ­ãƒ¼ã‚«ãƒ«LLMã‚’ä½¿ã†
  # room_123:
  #   summary:
  #     provider: local
  #     model: llama3

# -----------------------------------------------------------------------------
# Fallback Settings
# AIã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®š
# -----------------------------------------------------------------------------
ai_fallback:
  summary:
    - provider: openai
      model: gpt-4o-mini
    - provider: google
      model: gemini-1.5-flash
    - provider: local
      model: llama3

  rag_answer:
    - provider: anthropic
      model: claude-3-5-sonnet-20241022
    - provider: openai
      model: gpt-4o
    - provider: google
      model: gemini-1.5-pro

# -----------------------------------------------------------------------------
# Rate Limiting
# ãƒ¬ãƒ¼ãƒˆåˆ¶é™è¨­å®š
# -----------------------------------------------------------------------------
rate_limits:
  discord:
    requests_per_second: 50

  openai:
    requests_per_minute: 60
    tokens_per_minute: 90000

  anthropic:
    requests_per_minute: 50
    tokens_per_minute: 100000
EOF

echo "âœ… config.yaml ã‚’ä½œæˆã—ã¾ã—ãŸ"

# -----------------------------------------------------------------------------
# å®Œäº†å‡¦ç†
# -----------------------------------------------------------------------------
echo ""
echo "=========================================="
echo "ðŸŽ‰ å…¨ã¦ã®æ–‡æ›¸ä½œæˆãŒå®Œäº†ã—ã¾ã—ãŸï¼"
echo "=========================================="
echo ""
echo "ä½œæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«:"
echo "  - docs/REQUIREMENTS.md"
echo "  - docs/ARCHITECTURE.md"
echo "  - docs/DEVELOPMENT_PLAN.md"
echo "  - docs/TEST_PLAN.md"
echo "  - docs/SETUP.md"
echo "  - docs/USER_GUIDE.md"
echo "  - docs/DISCUSSION_SUMMARY.md"
echo "  - config.yaml"
echo ""
echo "æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—:"
echo "  git add ."
echo "  git commit -m 'docs: add all documentation'"
echo "  git push origin main"
echo ""
